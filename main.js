(()=>{"use strict";var e={340:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(645),o=t.n(n)()((function(e){return e[1]}));o.push([e.id,"html, body {\n  margin: 0;\n}\n\n#fluid {\n  display: block;\n  height: 100vh;\n  margin: auto;\n}\n",""]);const i=o},645:e=>{e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var t=e(r);return r[2]?"@media ".concat(r[2]," {").concat(t,"}"):t})).join("")},r.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var u=this[i][0];null!=u&&(o[u]=!0)}for(var a=0;a<e.length;a++){var f=[].concat(e[a]);n&&o[f[0]]||(t&&(f[2]?f[2]="".concat(t," and ").concat(f[2]):f[2]=t),r.push(f))}},r}},379:(e,r,t)=>{var n,o=function(){var e={};return function(r){if(void 0===e[r]){var t=document.querySelector(r);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[r]=t}return e[r]}}(),i=[];function u(e){for(var r=-1,t=0;t<i.length;t++)if(i[t].identifier===e){r=t;break}return r}function a(e,r){for(var t={},n=[],o=0;o<e.length;o++){var a=e[o],f=r.base?a[0]+r.base:a[0],l=t[f]||0,s="".concat(f," ").concat(l);t[f]=l+1;var c=u(s),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==c?(i[c].references++,i[c].updater(d)):i.push({identifier:s,updater:v(d,r),references:1}),n.push(s)}return n}function f(e){var r=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=t.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){r.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(r);else{var u=o(e.insert||"head");if(!u)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");u.appendChild(r)}return r}var l,s=(l=[],function(e,r){return l[e]=r,l.filter(Boolean).join("\n")});function c(e,r,t,n){var o=t?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=s(r,o);else{var i=document.createTextNode(o),u=e.childNodes;u[r]&&e.removeChild(u[r]),u.length?e.insertBefore(i,u[r]):e.appendChild(i)}}function d(e,r,t){var n=t.css,o=t.media,i=t.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var x=null,m=0;function v(e,r){var t,n,o;if(r.singleton){var i=m++;t=x||(x=f(r)),n=c.bind(null,t,i,!1),o=c.bind(null,t,i,!0)}else t=f(r),n=d.bind(null,t,r),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return n(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;n(e=r)}else o()}}e.exports=function(e,r){(r=r||{}).singleton||"boolean"==typeof r.singleton||(r.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var t=a(e=e||[],r);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<t.length;n++){var o=u(t[n]);i[o].references--}for(var f=a(e,r),l=0;l<t.length;l++){var s=u(t[l]);0===i[s].references&&(i[s].updater(),i.splice(s,1))}t=f}}}},502:e=>{e.exports="precision mediump float;\n\nuniform float uDeltaT;\nuniform sampler2D uColorFieldTex;\nuniform sampler2D uVecFieldTex;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vec2 u = texture2D(uVecFieldTex, vTexCoord).xy;\n  vec2 sourceCoord = vTexCoord - (0.5 * uDeltaT * u);\n\n  gl_FragColor = texture2D(uColorFieldTex, sourceCoord);\n}\n"},734:e=>{e.exports="precision mediump float;\n\nuniform float uDeltaX;\nuniform float uScale;\nuniform sampler2D uX;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  float eps = uDeltaX;\n  \n  vec2 offset = vec2(0.0, 0.0);\n  if (vTexCoord.x - 0.0 < eps) {\n    offset = vec2(uDeltaX, 0.0);\n  } else if (1.0 - vTexCoord.x < eps) {\n    offset = vec2(-uDeltaX, 0.0);\n  } else if (vTexCoord.y - 0.0 < eps) {\n    offset = vec2(0.0, uDeltaX);\n  } else if (1.0 - vTexCoord.y < eps) {\n    offset = vec2(0.0, -uDeltaX);\n  } else {\n    // prevent scaling if not on boundary\n    gl_FragColor = texture2D(uX, vTexCoord);\n    return;\n  }\n  vec2 color = uScale * texture2D(uX, vTexCoord + offset).xy;\n  gl_FragColor = vec4(color, 0.0, 1.0);\n}\n"},434:e=>{e.exports="precision mediump float;\n\nuniform vec3 uColor;\nuniform vec2 uImpulsePos;\nuniform sampler2D uColorFieldTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vec4 origColor = texture2D(uColorFieldTexture, vTexCoord);\n\n  float eps = 0.025;\n  vec2 delta = vTexCoord - uImpulsePos;\n  if (length(delta) < eps) {\n    origColor.xyz = uColor;\n  }\n\n  gl_FragColor = origColor;\n}\n"},91:e=>{e.exports="precision mediump float;\n\nuniform float uDeltaX;\nuniform sampler2D uW;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vec2 wLeft = texture2D(uW, vTexCoord - vec2(uDeltaX, 0.0)).xy;\n  vec2 wRight = texture2D(uW, vTexCoord + vec2(uDeltaX, 0.0)).xy;\n  vec2 wDown = texture2D(uW, vTexCoord - vec2(0.0, uDeltaX)).xy;\n  vec2 wUp = texture2D(uW, vTexCoord + vec2(0.0, uDeltaX)).xy;\n\n  float halfRdx = 1.0 / (2.0 * uDeltaX);\n  gl_FragColor = vec4(halfRdx * ((wRight.x - wLeft.x) + (wUp.y - wDown.y)), 0.0, 0.0, 1.0);\n}\n"},194:e=>{e.exports="precision mediump float;\n\nuniform float uDeltaT;\nuniform float uRho;\nuniform vec2 uForce;\nuniform vec2 uImpulsePos;\nuniform sampler2D uVelocityFieldTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vec4 color = texture2D(uVelocityFieldTexture, vTexCoord);\n\n  vec2 delta = vTexCoord - uImpulsePos;\n  float scale = uDeltaT * exp(-((delta.x * delta.x) + (delta.y * delta.y)) / uRho);\n\n  color.xy += scale * uForce;\n\n  gl_FragColor = color;\n}\n"},98:e=>{e.exports="precision mediump float;\n\nuniform float uDeltaX;\nuniform float uAlpha;\nuniform float uRBeta;\nuniform sampler2D uX;\nuniform sampler2D uB;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vec2 xLeft = texture2D(uX, vTexCoord - vec2(uDeltaX, 0.0)).xy;\n  vec2 xRight = texture2D(uX, vTexCoord + vec2(uDeltaX, 0.0)).xy;\n  vec2 xDown = texture2D(uX, vTexCoord - vec2(0.0, uDeltaX)).xy;\n  vec2 xUp = texture2D(uX, vTexCoord + vec2(0.0, uDeltaX)).xy;\n\n  vec2 bCenter = texture2D(uB, vTexCoord).xy;\n\n  gl_FragColor = vec4(uRBeta * (xLeft + xRight + xUp + xDown + (uAlpha * bCenter)), 0.0, 1.0);\n}\n"},95:e=>{e.exports="precision mediump float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D uTex;\n\nvoid main() {\n  gl_FragColor = texture2D(uTex, vTexCoord);\n}\n"},789:e=>{e.exports="precision mediump float;\n\nattribute vec4 aPosition;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  // assume quad to generate tex coords\n  vTexCoord = vec2((aPosition.x + 1.0) / 2.0, (aPosition.y + 1.0) / 2.0);\n}\n"},578:e=>{e.exports="precision mediump float;\n\nuniform float uDeltaX;\nuniform sampler2D uP;\nuniform sampler2D uW;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  float pLeft = texture2D(uP, vTexCoord - vec2(uDeltaX, 0.0)).x;\n  float pRight = texture2D(uP, vTexCoord + vec2(uDeltaX, 0.0)).x;\n  float pDown = texture2D(uP, vTexCoord - vec2(0.0, uDeltaX)).x;\n  float pUp = texture2D(uP, vTexCoord + vec2(0.0, uDeltaX)).x;\n\n  vec4 color = texture2D(uW, vTexCoord);\n  float halfRdx = 1.0 / (2.0 * uDeltaX);\n  color.xy -= halfRdx * vec2((pRight - pLeft), (pUp - pDown));\n\n  gl_FragColor = color;\n}\n"},109:e=>{e.exports="precision mediump float;\n\nuniform float uDeltaT;\nuniform float uDeltaX;\nuniform float uVorticity;\nuniform sampler2D uV;\n\nvarying vec2 vTexCoord;\n\nfloat getCurl(in float x, in float y) {\n  float upX = texture2D(uV, vec2(x, y + uDeltaX)).x;\n  float downX = texture2D(uV, vec2(x, y - uDeltaX)).x;\n  float leftY = texture2D(uV, vec2(x - uDeltaX, y)).y;\n  float rightY = texture2D(uV, vec2(x + uDeltaX, y)).y;\n\n  return 0.5 * (upX - downX + leftY - rightY);\n}\n\nvoid main() {\n  float x = vTexCoord.x;\n  float y = vTexCoord.y;\n\n  float dx = abs(getCurl(x, y - uDeltaX)) - abs(getCurl(x, y + uDeltaX));\n  float dy = abs(getCurl(x + uDeltaX, y)) - abs(getCurl(x - uDeltaX, y));\n\n  vec2 d = vec2(0.5 * dx, 0.5 * dy);\n  float len = length(d) + 1e-9;\n  d = uVorticity / len * d;\n\n  gl_FragColor = texture2D(uV, vTexCoord) + uDeltaT * getCurl(x, y) * vec4(d, 0.0, 1.0);\n}\n"}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={id:n,exports:{}};return e[n](i,i.exports,t),i.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e=t(379),r=t.n(e),n=t(340);r()(n.Z,{insert:"head",singleton:!1}),n.Z.locals;var o=t(789),i=t(95),u=t(502),a=t(194),f=t(98),l=t(91),s=t(578),c=t(734),d=t(434),x=t(109);function m(e,r,t){const n=e.createShader(r);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const r=e.getShaderInfoLog(n);throw new Error(`failed to compile shader: ${r}`)}return n}const v=new Float32Array([1,1,-1,1,1,-1,-1,-1]),T=new Uint16Array([0,1,2,1,3,2]);function E(e,r,t,n,o,i){return i.bind(e),r.useProgram(e),e.uniform1f(r.uniforms.uDeltaT,t),e.uniform1i(r.uniforms.uColorFieldTex,0),e.uniform1i(r.uniforms.uVecFieldTex,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.tex),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(r.attribLoc,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r.attribLoc),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),i.unbind(e),[i,n]}function R(e,r,t,n,o,i,u){r.useProgram(e),e.uniform1f(r.uniforms.uDeltaX,t),e.uniform1f(r.uniforms.uAlpha,n),e.uniform1f(r.uniforms.uRBeta,o),e.uniform1i(r.uniforms.uX,0),e.uniform1i(r.uniforms.uB,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i.tex),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,u.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}function b(e,r,t,n,o,i){return i.bind(e),r.useProgram(e),e.uniform1f(r.uniforms.uDeltaX,t),e.uniform1f(r.uniforms.uScale,n),e.uniform1i(r.uniforms.uX,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,o.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),i.unbind(e),[i,o]}class p{constructor(e,r,t,n,o,i){this.program=function(e,r){const t=e.createProgram();for(const n of r)e.attachShader(t,n);if(e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS)){const r=e.getProgramInfoLog(t);throw new Error(`failed to link program: ${r}`)}return t}(e,r),this.uniforms=t.reduce(((r,t)=>({...r,[t]:e.getUniformLocation(this.program,t)})),{}),this.vertBuffer=function(e,r){const t=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),t}(e,o),this.indexBuffer=function(e,r){const t=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),t}(e,i),this.attribLoc=e.getAttribLocation(this.program,n)}useProgram(e){e.useProgram(this.program)}}class h{constructor(e,r,t,n){this.fb=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.fb),this.tex=this.createFloatTexture(e,r,t,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.tex,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}createFloatTexture(e,r,t,n){const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,t,0,e.RGBA,e.FLOAT,n??null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),o}bind(e){e.bindFramebuffer(e.FRAMEBUFFER,this.fb)}unbind(e){e.bindFramebuffer(e.FRAMEBUFFER,null)}clear(e){e.bindFramebuffer(e.FRAMEBUFFER,this.fb),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.bindFramebuffer(e.FRAMEBUFFER,null)}}var D="undefined"!=typeof Float32Array?Float32Array:Array;Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});var g;g=new D(2),D!=Float32Array&&(g[0]=0,g[1]=0);const A=document.getElementById("fluid"),F=window.innerHeight,y=A.width=F,_=A.height=F,C=A.getContext("webgl");if(null===C)throw alert("unable to initialize webgl"),new Error("unable to initialize webgl");C.getExtension("OES_texture_float"),C.getExtension("OES_texture_float_linear"),C.getExtension("WEBGL_color_buffer_float"),C.viewport(0,0,C.canvas.width,C.canvas.height),C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT);const X=new class{constructor(e){this.bounds={left:0,top:0,width:0,height:0},this.position=null,this.velocity=[0,0],this.down=!1;const r=()=>{const{left:r,top:t,width:n,height:o}=e.getBoundingClientRect();this.bounds={left:Math.floor(r),top:Math.floor(t),width:n,height:o}};r(),window.addEventListener("resize",r),e.addEventListener("mousemove",(({clientX:e,clientY:r})=>{const{left:t,top:n,width:o,height:i}=this.bounds,u=[(e-t)/o,(i-(r-n))/i];this.position||(this.position=u),this.velocity=function(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e}(this.velocity,u,this.position),this.position=u})),e.addEventListener("mousedown",(()=>{this.down=!0})),e.addEventListener("mouseup",(()=>{this.down=!1}))}}(A),B=new class{constructor(e){this.vert={},this.frag={},this.vert.standard=m(e,e.VERTEX_SHADER,o);const r=[{name:"quad",source:i},{name:"advect",source:u},{name:"force",source:a},{name:"jacobi",source:f},{name:"divergence",source:l},{name:"subtract",source:s},{name:"boundary",source:c},{name:"color",source:d},{name:"vorticity",source:x}];for(const t of r)this.frag[t.name]=m(e,e.FRAGMENT_SHADER,t.source)}}(C),U=new p(C,[B.vert.standard,B.frag.quad],["uTex"],"aPosition",v,T),w=new p(C,[B.vert.standard,B.frag.advect],["uDeltaT","uColorFieldTex","uVecFieldTex"],"aPosition",v,T),P=new p(C,[B.vert.standard,B.frag.force],["uDeltaT","uRho","uForce","uImpulsePos","uVelocityFieldTexture"],"aPosition",v,T),L=new p(C,[B.vert.standard,B.frag.jacobi],["uDeltaX","uAlpha","uRBeta","uX","uB"],"aPosition",v,T),S=new p(C,[B.vert.standard,B.frag.divergence],["uDeltaX","uW"],"aPosition",v,T),N=new p(C,[B.vert.standard,B.frag.subtract],["uDeltaX","uP","uW"],"aPosition",v,T),I=new p(C,[B.vert.standard,B.frag.boundary],["uDeltaX","uScale","uX"],"aPosition",v,T),M=new p(C,[B.vert.standard,B.frag.color],["uColor","uImpulsePos","uColorFieldTexture"],"aPosition",v,T),O=new p(C,[B.vert.standard,B.frag.vorticity],["uDeltaT","uDeltaX","uVorticity","uV"],"aPosition",v,T);let V=new h(C,y,_),Y=new h(C,y,_),G=new h(C,y,_),W=new h(C,y,_),H=new h(C,y,_);const j=function(e,r){const t=[];t.reverse(e*r*4);const n=e/10;for(let o=0;o<e;o+=1)for(let e=0;e<r;e+=1){let r=.2;(Math.floor(o/n)+Math.floor(e/n))%2==0&&(r=1),t.push(.1,.1,r,1)}return new Float32Array(t)}(y,_);let q=new h(C,y,_,j),k=new h(C,y,_),z=null;const Z=e=>{const r=e/1e3;let t=r-z;(null===z||t>.1)&&(t=1/60),z=r;const n=1/y;if(X.down){let e=[0,0];e=function(e,r,t){return e[0]=500*r[0],e[1]=500*r[1],e}(e,X.velocity),[V,Y]=function(e,r,t,n,o,i,u,a){return a.bind(e),r.useProgram(e),e.uniform1f(r.uniforms.uDeltaT,t),e.uniform1f(r.uniforms.uRho,.001),e.uniform2fv(r.uniforms.uForce,o),e.uniform2fv(r.uniforms.uImpulsePos,i),e.uniform1i(r.uniforms.uVelocityFieldTexture,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),a.unbind(e),[a,u]}(C,P,t,0,e,X.position,V,Y),[q,k]=function(e,r,t,n,o,i){return i.bind(e),r.useProgram(e),e.uniform3fv(r.uniforms.uColor,[1,.6,0]),e.uniform2fv(r.uniforms.uImpulsePos,n),e.uniform1i(r.uniforms.uColorFieldTexture,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,o.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),i.unbind(e),[i,o]}(C,M,0,X.position,q,k)}[V,Y]=E(C,w,t,V,V,Y);{const e=20,r=n*n/(1e-7*t),o=1/(4+r),i=[V,Y];for(let t=0;t<e;t+=1){const e=i[t%2],u=i[(t+1)%2];u.bind(C),R(C,L,n,r,o,e,e),u.unbind(C)}}{H=function(e,r,t,n,o){return o.bind(e),r.useProgram(e),e.uniform1f(r.uniforms.uDeltaX,t),e.uniform1i(r.uniforms.uW,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),o.unbind(e),o}(C,S,n,V,H);const e=-n*n,r=.25;[G,W]=function(e,r,t,n,o,i,u,a,f){const l=[u,f];for(let t=0;t<20;t+=1){const u=l[t%l.length],f=l[(t+1)%l.length];f.bind(e),R(e,r,n,o,i,u,a),f.unbind(e)}return[u,f]}(C,L,0,n,e,r,G,H,W)}[V,Y]=function(e,r,t,n,o,i){return i.bind(e),r.useProgram(e),e.uniform1f(r.uniforms.uDeltaX,t),e.uniform1i(r.uniforms.uP,0),e.uniform1i(r.uniforms.uW,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.tex),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),i.unbind(e),[i,o]}(C,N,n,G,V,Y),[V,Y]=b(C,I,n,-1,V,Y),[G,W]=b(C,I,n,1,G,W),[V,Y]=function(e,r,t,n,o,i,u){return u.bind(e),r.useProgram(e),e.uniform1f(r.uniforms.uDeltaT,t),e.uniform1f(r.uniforms.uDeltaX,n),e.uniform1f(r.uniforms.uVorticity,10),e.uniform1i(r.uniforms.uV,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i.tex),e.bindBuffer(e.ARRAY_BUFFER,r.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),u.unbind(e),[u,i]}(C,O,t,n,0,V,Y),[q,k]=E(C,w,t,q,V,k),C.clearColor(.3,.8,0,1),C.clear(C.COLOR_BUFFER_BIT),U.useProgram(C),C.uniform1i(U.uniforms.uTex,0),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,q.tex),C.bindBuffer(C.ARRAY_BUFFER,U.vertBuffer),C.vertexAttribPointer(U.attribLoc,2,C.FLOAT,!1,0,0),C.enableVertexAttribArray(U.attribLoc),C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,U.indexBuffer),C.drawElements(C.TRIANGLES,6,C.UNSIGNED_SHORT,0),requestAnimationFrame(Z)};requestAnimationFrame(Z)})()})();